---
title: "Key Concepts"
source: deepwiki
repo: cameronking4/docdrift
topic_id: "1.2"
generated: true
last_synced: "2026-02-19"
---
# Key Concepts

This page defines core terminology and design principles for docdrift. For implementation details, see [Architecture](#1.1). For configuration, see [docdrift.yaml](../../docdrift-yml.md).

---

## Drift

**Drift** is the gap between code behavior and documentation. Docdrift detects:

| Type | Description | Remediation |
|------|-------------|-------------|
| **Spec drift** | API spec (OpenAPI, GraphQL, etc.) in code ≠ published spec in docs | Devin updates spec and docs |
| **Baseline drift** | API changed since last known sync (`lastKnownBaseline`) | Devin updates spec and docs |
| **Conceptual drift** | Code paths changed that may affect guides (path heuristics) | Devin infers and updates, or escalate to issue |

---

## lastKnownBaseline

A commit SHA where docs were last known to be in sync with the API. Used as a temporal anchor:

- **Blank** — Assume drift (first install). Proceed as if drift exists.
- **Set** — Compare current export to published spec at that commit. Different → drift.
- **Updated automatically** — `docdrift-baseline-update` workflow sets it when a docdrift PR is merged.

Reduces noise by only remediating changes since the last attested sync.

---

## Run Gate

The **run gate** decides whether to start a Devin session:

- `spec_drift`, `baseline_drift`, `baseline_missing`, `spec_export_invalid` — Proceed to session
- `conceptual_only`, `infer` — Proceed (auto mode only)
- `none` — Exit early; no session

---

## Spec Providers

Plugins that compare current vs published specs. Supported formats: `openapi3`, `swagger2`, `graphql`, `fern`, `postman`. Each defines:

- **current** — Source (export command, local path, or URL)
- **published** — Path in docs repo to update
- **validation** — Optional completeness checks (e.g. requestBody on POST)

---

## Modes: strict vs auto

| Mode | When it runs |
|------|--------------|
| **strict** (default) | Only spec-related gates (spec drift, baseline drift, baseline missing, spec export invalid) |
| **auto** | Also runs when path mappings match, even with no spec drift (heuristic / infer) |

---

## Branch Strategy

| Strategy | Behavior |
|----------|----------|
| **single** (default) | One branch (e.g. `docdrift`). Devin updates the existing PR when present. Low noise. |
| **per-pr** | One branch per source PR. Each upstream PR gets its own docdrift PR. |

---

## Signals

A **signal** is a drift detection result (tier, confidence, kind, evidence). Signals flow into the run gate and policy engine. Kinds include: `openapi_diff`, `baseline_drift`, `baseline_missing`, `heuristic_path_impact`, `infer_mode`, `spec_export_incomplete`.

---

## Policy Actions

The policy engine selects one action per run:

| Action | When |
|--------|------|
| `OPEN_PR` | High confidence, within caps, allowlist match → Devin opens/updates PR |
| `UPDATE_EXISTING_PR` | Existing docdrift PR for this area → instruct Devin to update it |
| `OPEN_ISSUE` | Low confidence, conceptual mode, or cap reached → GitHub issue |
| `NOOP` | Idempotency key already seen → skip |
| `BLOCKED` | Changes outside allowlist → block |

---

## Evidence Bundle

A package of drift report, spec diffs, and impacted doc snippets uploaded to the Devin API as session attachments. Devin uses it to produce a remediation PR.

---

## State

Persistent data in `.docdrift/state.json`:

- **Idempotency** — Prevents duplicate actions for same repo/SHAs
- **Daily PR cap** — Limits PRs per day
- **Area PRs** — Tracks existing docdrift PRs for bundling and SLA

---

## Low-Noise Mechanisms

- **Single branch** — One branch; update existing PR instead of opening many
- **Single session** — One Devin session for the whole docsite per run
- **Baseline drift** — Compare to last sync; no drift since then → no session
- **Run gate** — Exit when `none`; no session for docs-check-only
- **Confidence gating** — Low confidence → issue, not PR
- **PR caps** — Daily limit; bundle or escalate when reached
- **Idempotency** — No duplicate actions for same inputs
- **Allowlist** — Devin may only edit files under allowed paths
