---
title: Configuration
description: Modes, spec providers, and key config concepts.
---

Modes, spec providers, and key config concepts.

## Auto vs strict modes

| Mode | When drift is detected | Use case |
| ---- | ---------------------- | -------- |
| **strict** (default) | Only when **spec drift** is detected (OpenAPI, GraphQL, etc.). No spec drift → no Devin session. | API-first teams; gate only on real API changes. |
| **auto** | Also runs when **pathMappings** match (changed files hit `match` patterns) even if no spec drift. Devin infers docs from file changes. | Conceptual docs, guides, or path-only setups. |

```yaml
# docdrift.yaml
mode: strict   # only on spec drift
# or
mode: auto     # also on pathMapping matches
```

## Pull request strategy (commit-to-branch vs separate PR)

When docdrift runs on a **pull request** event, you choose how Devin remediates:

| `devin.prStrategy` | Default | Behavior |
| ------------------ | ------- | -------- |
| **`commit-to-branch`** | Yes | Devin commits directly to the source PR branch. No separate docdrift PR; doc updates appear on the same PR. Lowest noise. |
| **`separate-pr`** | No | Devin creates or updates a `docdrift/pr-N` branch and draft PR; a comment links it to the source PR. |

```yaml
# docdrift.yaml — under devin:
devin:
  prStrategy: commit-to-branch   # default; use separate-pr for docdrift/pr-N PRs
```

The workflow must pass the PR head ref (e.g. `GITHUB_PR_HEAD_REF: ${{ github.event.pull_request.head.ref }}`) and `--pr-head-ref` so Devin knows which branch to commit to. Docdrift does not run when the PR head branch starts with `docdrift/`.

## Branch strategy (push / manual)

For **push to main** or **manual** runs, docdrift uses a **single branch** by default:

| Strategy | Default | Behavior |
| -------- | ------- | -------- |
| **`single`** | Yes | One branch (e.g. `docdrift`) for all runs. If an open PR from that branch exists, Devin updates it instead of opening a new one. |
| **`per-pr`** | No | One branch per source PR (e.g. `docdrift/pr-N`). Used with `prStrategy: "separate-pr"` for pull_request. |

```yaml
# docdrift.yaml — explicit low-noise (default)
branchStrategy: single
branchPrefix: docdrift
```

See [docdrift.yaml reference](https://github.com/cameronking4/docdrift/blob/main/docdrift-yml.md#branch-strategy-single-branch--low-noise) for details.

## Spec providers

Docdrift supports several API spec formats. Configure via `specProviders`:

| Format | Description |
| ------ | ----------- |
| **openapi3** | OpenAPI 3.x (default) |
| **swagger2** | OpenAPI 2.0 / Swagger 2.0 |
| **graphql** | GraphQL schema |
| **fern** | Fern API definition |
| **postman** | Postman Collection JSON |

Each provider defines `current` (source of truth: `export`, `local`, or `url`) and `published` (docs path to update):

```yaml
specProviders:
  - format: openapi3
    current:
      type: export
      command: "npm run openapi:export"
      outputPath: "openapi/generated.json"
    published: "apps/docs-site/openapi/openapi.json"
```

## Full configuration reference

- **Detection (openapi, paths, specProviders):** [Detection Rules](/deepwiki/pages/detection-rules)
- **Policy (caps, confidence, allowlist, verification):** [Policy Configuration](/deepwiki/pages/policy-configuration)
- **Simple config (`openapi` + `docsite`):** Supported in addition to or instead of `specProviders`; see the [docdrift.yaml](https://github.com/cameronking4/docdrift/blob/main/docdrift-yml.md) reference in the repo for every field and default.
