# Example docdrift.yaml - adapt paths to your repo
# yaml-language-server: $schema=https://unpkg.com/@devinnn/docdrift@latest/docdrift.schema.json
version: 2

# lastKnownBaseline: optional commit SHA where docs were in sync. Omit for first install.

# Pull request (on: pull_request): docdrift runs on the PR branch (head/base SHAs from the PR).
# - prStrategy: commit-to-branch (default) — Devin commits to the source PR branch; no extra docdrift PR.
# - prStrategy: separate-pr — Devin creates/updates a docdrift/pr-N branch and draft PR.

specProviders:
  - format: openapi3
    current:
      type: export
      command: "npm run openapi:export"
      outputPath: "openapi/generated.json"
    published: "docs/openapi/openapi.json"

docsite: "docs"
mode: strict

pathMappings:
  - match: "src/api/**"
    impacts: ["docs/guides/**", "docs/api/**"]

exclude: ["docs/blog/**"]
requireHumanReview: ["docs/guides/**"]

devin:
  apiVersion: v1
  unlisted: true
  maxAcuLimit: 2
  tags: [docdrift]
policy:
  prCaps:
    maxPrsPerDay: 2
    maxFilesTouched: 20
  confidence:
    autopatchThreshold: 0.8
  allowlist:
    - "docs/**"
    - "openapi/**"
  verification:
    commands:
      - "npm run docs:build"
  slaDays: 7
  slaLabel: docdrift
  allowNewFiles: false
